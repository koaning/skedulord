<!doctype html>
<html lang="en">
    <head>
        <title>skedulord docs</title>
        <meta charset="utf-8">
        <!-- include the termynal stylesheet -->
        <link rel="stylesheet" href="termynal.css">
        <!-- some custom styles for the page -->
        <link href="https://fonts.googleapis.com/css?family=Fira+Mono">
        <style>
            body {
                padding: 0;

                margin: 0 auto;
                width: 45vw;
            }
        </style>
    </head>
    <body>
        <br>
        <br>

        <img style="margin:0 auto; display: block;" src="logo.png" width="300">

        <p>The goal of this project is to offer a lightweight method
           of organising log files for jobs that run from the command line.
           It offers a command line app that can be used from <b>cron</b> to help with maintaining an overview. </p>
        <h2 class="h">How do I use <b>skedulord</b>?</h2>
        <div id="termynal1" data-termynal>
            <span data-ty="input">lord init</span>
            <span data-ty="input">lord run pyjob "python goodjob.py"</span>
            <span data-ty data-ty-delay="0" class="blob green">
            - id: c67d713a <br>
            - name: pyjob <br>
            - tries: 1 <br>
            - command: python goodjob.py <br>
            - startime: 2019-10-13 21:11:03 <br>
            - endtime: 2019-10-13 21:11:08 <br>
            - succeed: True <br>
            - log: ~/.skedulord/jobs/pyjob/2019-10-13T21:11:03.txt
            </span>
            <span data-ty="input">lord run pyjob "python badjob.py"</span>
            <span data-ty data-ty-delay="0" class="blob red">
            - id: c67d713a <br>
            - name: pyjob <br>
            - tries: 3 <br>
            - command: python badjob.py <br>
            - startime: 2019-10-13 21:11:11 <br>
            - endtime: 2019-10-13 21:11:15 <br>
            - succeed: False <br>
            - log: ~/.skedulord/jobs/pyjob/2019-10-13T21:11:11.txt
            </span>
            <span data-ty="input">ls ~/.skedulord/jobs/pyjob</span>
            <span data-ty data-ty-delay="0" class="gray">heartbeats.jsonl jobs</span>
            <span data-ty="input">ls ~/.skedulord/jobs/pyjob</span>
            <span data-ty data-ty-delay="0" class="gray">2019-10-13T21:11:03.txt 2019-10-13T21:11:11.txt</span>
            <span data-ty="input">lord serve --host 0.0.0.0 --port 8080</span>
            <span data-ty data-ty-delay="0" class="gray">Serving logs over at 0.0.0.0:8080.</span>
        </div>

        <p>This starts a small website with a dashboard of all the jobs.</p>

        <h2 class="h">What does <b>skedulord</b> do?</h2>

        <p>Skedulord will:</p>
        <ol>
            <li>run your command via `lord run [jobname] "[command"`</li>
            <li>capture all the stdout</li>
            <li>save this into a file at <span class="green">~/.skedulord/[jobname]/[timestamp].txt</span></li>
            <li>log monitoring metadata at <span class="green">~/.skedulord/heartbeats.jsonl</span></li>
        </ol>

        <p>There's some extra settings you can add to a job though.</p>

        <div id="termynal2" data-termynal>
            <span data-ty="input">lord run job1 "python goodjob.py" --retry 3 --wait 5</span>
            <span data-ty="input">lord run job2 "python badjob.py" --retry 5 --wait 60</span>
        </div>

        <p>These jobs will be retried should they fail. The first job will attempt 3 tries in total
            and will wait 5 seconds between each attempt. The second job will attempt 5 tries and wait
            60 seconds between each go.</p>

        <h2 class="h">Skedulord commands.</h2>

        <p>There's some extra helpers in there too.</p>

        <div id="termynal2" data-termynal>
            <span data-ty="input">lord --help</span>
            <span data-ty data-ty-delay="0" class="blob gray">
            Usage: lord [OPTIONS] COMMAND [ARGS]...<br>
            <br>
              SKEDULORD: keeps track of logs so you don't have to. <br>
            <br>
            Options:<br>
              --help  Show this message and exit.<br>
            <br>
            Commands:<br>
            &nbsp;&nbsp;history&nbsp;&nbsp;show historical log overview<br>
            &nbsp;&nbsp;init&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setup skedulord<br>
            &nbsp;&nbsp;nuke&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hard reset of disk state<br>
            &nbsp;&nbsp;run&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;run (and log) the command, can retry<br>
            &nbsp;&nbsp;serve&nbsp;&nbsp;&nbsp;&nbsp;start the simple dashboard<br>
            &nbsp;&nbsp;summary&nbsp;&nbsp;shows a summary of the logs<br>
            &nbsp;&nbsp;version&nbsp;&nbsp;confirm the version<br>
            </span>
        </div>

        <h2 class="h">How do I install it?</h2>

        <div id="termynal2" data-termynal>
            <span data-ty="input">pip install skedulord</span>
        </div>

        <h2 class="h">What does skedulord not do?</h2>
        <p>Skedulord does not:</p>
        <ol>
            <li>schedule jobs for you, this is what <span class="green">cron</span> is for</li>
            <li>integrate with your compute services on your behalf</li>
            <li>write your jobs for you</li>
        </ol>
        <h2 class="h">What are the main usecases?</h2>
        <p>Lot's of ETL jobs are plain and simple; you just want to make it easy to find logs
            of jobs that failed. Skedulord adds retry mechanics as well as an overview.
            Once your jobs become highly dependant then you'll need something more elaborate (like <a href="https://airflow.apache.org/">airflow</a>).
            There's a barrier to entry and maintenance for those tools though so if you don't need it
            you might prefer this simpler tool.</p>
        <h2 class="h">Food for Thought</h2>
        <p>How you run your ETL jobs depends on the problems that you have. But there are a few things you might like to consider.</p>
        <ul>
            <li>You could schedule a cronjob that will sync the local log files to cloud storage for a backup. You could also schedule a job that will ensure that the disk space is kept at bay.</li>
            <li>You could provision cronjobs automatically using ansible. This can be part of you CI/CD pipeline.</li>
            <li>You could consider using the cron server as a scheduling server and running your jobs someplace else.
                Running a docker container can be done in the cloud from the command line.</li>
            <li>You could read the `~/.skedulord/heartbeats` file with pandas if you're interested in analysing.</li>
        </ul>
        <br>
        <br>
        <br>
        <br>
        <br>

        <!-- include and initialise termynal.js -->
        <script src="termynal.js" data-termynal-container="#termynal1"></script>
    </body>
</html>
